---
title: "Introducción"
format: 
  html:
    linkcolor: "#1db954"
    toc: true
    toc-location: left
    fig-cap-location: top
    
lang: "es"    
editor: visual
---

## Introducción

La música ha sido parte fundamental de la historia de la humanidad. "La música es una de las expresiones creativas más íntimas del ser, ya que forma parte del quehacer cotidiano de cualquier grupo humano tanto por su goce estético como por su carácter funcional y social. La música nos identifica como seres, como grupos y como cultura, tanto por las raíces identitarias como por la locación geográfica y épocas históricas." (Angel, Camus y Mansilla, 2008: 18).

Desde que la existe la industria musical se han tratado de crear canciones que generen gran impacto en la sociedad, pues esto se podría traducir en beneficios monetarios en un periodo de tiempo cercano al estreno de la canción. Por esto puede ser importante para alguna empresa discográfica saber cómo hacer alguna canción exitosa, por lo tanto, podría ser relevante para estas compañías conocer cuales son las tendencias musicales, y los patrones que se repiten en las canciones que ya fueron exitosas.

Para entender mejor como han sido las tendencias musicales de los últimos años haremos un análisis de una base de datos de "Spotify", con el fin de ver cuales son los factores que hacen que una canción sea popular, o que al menos aumentan las posibilidades de que lo sea.

En este informe tendremos cuatro secciones. La primera parte será para explicar cómo están clasificados los datos, y cuando fueron recolectados, pues la plataforma tiene canciones muy antiguas, mucho más que la plataforma de donde fueron sacados los datos. En la segunda parte dejaremos claro cuáles serán los métodos que usaremos para hacer en análisis. En la tercera parte haremos el análisis y mostraremos los resultados, a través de tablas y gráficos, enfocándonos principalmente en las reproducciones y su relación con las demás variables. Para finalizar, la cuarta parte será una conclusión, en la que clarificaremos cuales son las variables que más influyen en el posible éxito de una canción.

## Contexto

La mayoria de las variables numéricas que miden aspectos tecnicos de una canción se obtuvieron por medio de algoritmos fueron hechos para medir este tipo de información.

La variable `explicit` en "Spotify" se aplica a una canción que tiene:

-   Lenguaje fuerte

-   Imagenes(Portada) o referencias a violencia fisica o mental

-   Referencias o imagenes sexuales

-   Racismo, homofobia, misoginia o cualquier mensaje o comportamiento que se pueda considerar discriminatorio

-   Comportamiento peligroso o criminal que podria incluso ser "glamorizado" o incentivar la imitación de dichas conductas

Generalmente esta variable con fines de restricción parental.

```{r echo=FALSE}
#| fig-cap: "Tabla de variables"
#| label: fig-tabla-variables

```

| Variable           | Tipo     | Descripción                                                                                                                                            |
|-----------------|-----------------|--------------------------------------|
| `name`             | caracter | Nombre de la canción                                                                                                                                   |
| `id`               | caracter | ID de la canción en Spotify                                                                                                                            |
| `artists`          | caracter | Nombre del/los interpretes                                                                                                                             |
| `genres`           | caracter | Género de la cancion (Variable única de `data_by_genres.csv`)                                                                                          |
| `year`             | numérica | Año de lanzamiento                                                                                                                                     |
| `release_date`     | caracter | Fecha de lanzamientos (Año-Mes-Día)                                                                                                                    |
| `valence`          | numérica | Qué tipo de emociónes transmite la canción, más triste cerca de 0, más feliz cerca de 1                                                                |
| `acousticness`     | numérica | Qué tan acustico es el sonido de la canción (precencia de instrumentos no electricos ni digitales), mas acústico cerca de 1, menos acústico cerca de 0 |
| `danceability`     | numérica | Que tan bailable es una canción, más bailable cerca de 1, menos bailable cerca de 0                                                                    |
| `duration_ms`      | numérica | Duración en milisegundos                                                                                                                               |
| `energy`           | numérica | Intencidad perceptual de la canción                                                                                                                    |
| `explicit`         | numérica | La canción tiene contenido explicito (Si=1,No=0)                                                                                                       |
| `instrumentalness` | numérica | Cantidad de voces en la canción, más cerca está de 1.0, más instrumental                                                                               |
| `key`              | numérica | Tono de la canción                                                                                                                                     |
| `liveness`         | numérica | Probabilidad de que la canción haya sido grabada en vivo                                                                                               |
| `loudness`         | numérica | Volumen de la canción                                                                                                                                  |
| `mode`             | numérica | Tonalidad mayor si es 1, tonalidad menor si es 0                                                                                                       |
| `popularity`       | numérica | Qué tan popular es la canción                                                                                                                          |
| `speechiness`      | numérica | Proporción de tiempo que ocupan palabras habladas o cantadas en la canción                                                                             |
| `tempo`            | numérica | Tempo de la canción (velocidad)                                                                                                                        |

Figura 1

```{r echo=FALSE, include=FALSE}
library(readr)
library(dplyr)
library(ggplot2)
library(here)
library(gt)
library(gtsummary)
library(gridExtra)



datos=read_csv(here::here("datos/data.csv"))

datos_a_estudiar1=read_csv(here::here("datos/datos_a_estudiar1.csv"))

muestra_datos=read_csv(here::here("datos/muestra_datos.csv"))


cantft=read_csv(here::here("datos/feat.csv"))

cantftM=read_csv(here::here("datos/featM.csv"))

```

Es evidente que hay canciones que no sirven, en primera instancia, para el estudio que queremos hacer, por lo tanto, si queremos maximizar las probabilidades de que el producto sea exitoso debemos ver cuales son los que han llegado al resultado que estamos buscando, para ello veamos la Figura 2:

```{r echo=FALSE}
#| fig-cap: "Canciones populares y no populares"
#| label: fig-subconj

datos$Popularidad=ifelse(datos$popularity >76, "Popular","No Popular")
grafico1=ggplot(data = datos)+
  geom_histogram(aes(x=datos$popularity, fill=Popularidad),bins = 30)+
  labs(
       x="Popularidad", y="Número de Canciones")+
  scale_fill_manual(values = c("#b3b3b3", "#1db954"))+
  theme_bw()+
  geom_vline(xintercept = 76,linetype="dashed",color="black")+
  annotate("text", x = 87, y = 25000, label = "Canciones a estudiar")
grafico1
```

Vemos que si el requisito mínimo para considerar una canción exitosa, es que tenga un valor sobre 75 en el indice de popularidad, y a simple vista se ve que la cantidad de obras que llegan a este número son muy pocas y que de hecho la mayoria de las canciones, se quedan cerca del 0.

\
Ajustamos un modelo que toma las seis variables que mas incidencia tienen en la popularidad(mostrar o llevar al anexo donde esta el codigo y esplicación del modelo).

```{r echo=FALSE}
#| fig-cap: "Duranción en segundos de canciones populares y muestra de las otras canciones"
#| label: fig-canciones-pop-durs

grafico4=ggplot(data=datos_a_estudiar1)+
  geom_histogram(aes(x=duration_s),col= "black",fill="#1db954",bins = 30)+
  theme_bw()+
  labs(x="Duración",
       y="Cantidad de canciones")

  
grafico42=ggplot(data=muestra_datos)+
  geom_histogram(aes(x=duration_s),col= "black",fill="#b3b3b3",bins = 30)+
  theme_bw()+
  labs(x="Duración",
       y="Cantidad de canciones")
  

graf4=grid.arrange(grafico4,grafico42,ncol=2)

```

```{r echo=FALSE}
#| fig-cap: "Bailabilidad de canciones populares y muestra de las otras canciones"
#| label: fig-canciones-pop-dance

grafico5=ggplot(data=datos_a_estudiar1)+
  geom_histogram(aes(x=danceability),col= "black",fill="#1db954",bins = 30)+
  theme_bw()+
  labs(
       x="Bailabilidad",
       y="Cantidad de canciones")



grafico52=ggplot(data=muestra_datos)+
  geom_histogram(aes(x=danceability),col= "black",fill="#b3b3b3",bins = 30)+
  theme_bw()+
  labs(
       x="Bailabilidad",
       y="Cantidad de canciones")

grid.arrange(grafico5,grafico52,ncol=2)

```

```{r echo=FALSE}
#| fig-cap: "Instrumentalidad de canciones populares y muestra de las otras canciones"
#| label: fig-canciones-pop-inst



grafico6=ggplot(data=datos_a_estudiar1)+
  geom_histogram(aes(x=instrumentalness), col= "black",fill="#1db954", bins=30)+
  theme_bw()+
  labs(
       x="Instrumentalidad",
       y="Cantidad de canciones")



grafico62=ggplot(data=muestra_datos)+
  geom_histogram(aes(x=instrumentalness),col= "black",fill="#b3b3b3", bins=30)+
  theme_bw()+
  labs(
       x="Instrumentalidad",
       y="Cantidad de canciones")

grid.arrange(grafico6,grafico62,ncol=2)

```

```{r echo=FALSE}
#| fig-cap: "Energia de canciones populares y muestra de las otras canciones"
#| label: fig-canciones-pop-energy


grafico7=ggplot(data=datos_a_estudiar1)+
  geom_histogram(aes(x=energy),col= "black",fill="#1db954", bins=30)+
  theme_bw()+
  labs(
       x="Energia",
       y="Cantidad de canciones")



grafico72=ggplot(data=muestra_datos)+
  geom_histogram(aes(x=energy),col= "black",fill="#b3b3b3", bins=30)+
  theme_bw()+  
  labs(
                    x="Energia",
                    y="Cantidad de canciones")


grid.arrange(grafico7,grafico72,ncol=2)
```

```{r echo=FALSE}
#| fig-cap: "Volumen de canciones populares y muestra de las otras canciones"
#| label: fig-canciones-pop-loud


grafico8=ggplot(data=datos_a_estudiar1)+
  geom_histogram(aes(x=loudness),col= "black",fill="#1db954", bins=30)+
  theme_bw()+
  labs(
       x="volumen",
       y="Cantidad de canciones")

grafico82=ggplot(data=muestra_datos)+
  geom_histogram(aes(x=loudness),col= "black",fill="#b3b3b3", bins=30)+
  theme_bw()+
  labs(
       x="Volumen",
       y="Cantidad de canciones")

grid.arrange(grafico8,grafico82,ncol=2)

```

```{r echo=FALSE}
#| fig-cap: "Volumen de canciones populares y muestra de las otras canciones"
#| label: fig-canciones-pop-Numart


grafico9=ggplot(data=datos_a_estudiar1)+
  geom_histogram(aes(x=numero_de_artistas),col= "black",fill="#1db954", bins=30)+
  theme_bw()+
  labs(
       x="Numero de artistas",
       y="Cantidad de canciones")


grafico92=ggplot(data=muestra_datos)+
  geom_histogram(aes(x=numero_de_artista_muestra),col= "black",fill="#b3b3b3", bins=30)+
  theme_bw()+
  labs(
       x="Numero de artistas",
       y="Cantidad de canciones")

grid.arrange(grafico9,grafico92,ncol=2)

```

```{r echo=FALSE}
#| fig-cap: "Colaboraciones en canciones populares y muestra de las otras canciones"
#| label: fig-canciones-pop-feat




grafico10=ggplot(data=cantft,aes(x=name,y=value))+
  geom_bar(stat="identity" ,col= "black",fill="#1db954",width=0.5)+
  theme_bw()+
  labs(x="Tipo de canción",
       y="Cantidad de canciones")




grafico102=ggplot(data=cantftM,aes(x=name,y=value))+
  geom_bar(stat="identity" ,col= "black",fill="#b3b3b3",width=0.5)+
  theme_bw()+
  labs(x="Tipo de canción",
       y="Cantidad de canciones")

grid.arrange(grafico10,grafico102,ncol=2)
```
